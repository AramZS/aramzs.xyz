<!DOCTYPE html>
<html dir="ltr" lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta http-equiv="x-ua-compatible" content="ie=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, viewport-fit=cover"/>

    <!-- Feeds -->
    <link rel="alternate" href="{{ metadata.feedUrl }}" type="application/atom+xml" title="Simon Dann&#39;s blog">
    
    <!-- Mastodon Verification -->
    <link rel="me" href="https://notacult.social/@carbontwelve" title="Mastodon: Not A Cult"/>
    <link rel="me" href="https://phpc.social/@carbontwelve" title="Mastodon: PHPC"/>

    <!-- SEO -->
    <title>{{ title or metadata.title }}</title>
    <meta name="description" content="{{ description or metadata.description }}"/>
    <link rel="canonical" href="{{ canonical or page.url }}"/>
    <meta name="robots" content="index, follow"/>
    <meta name="generator" content="Eleventy">
    {% block head %}{% endblock %}

    <!-- Open Graph -->
    <meta property="og:locale" content="en_GB"/>
    <meta property="og:site_name" content="{{ metadata.title }}"/>
    <meta property="og:title" content="{{ title or metadata.title }}"/>
    <meta property="og:type" content="{{ ogtype or 'website' }}"/>
    <meta property="og:url" content="{{ metadata.url }}{{ page.url }}"/>
    {% if ogImageHref %}
    <meta property="og:image" content="{{ ogImageHref }}">
    <meta name="twitter:card" content="summary_large_image"/>
    {% else %}
    <meta name="twitter:card" content="summary"/>
    {% endif %}

    <meta name="twitter:site" content="@carbontwelve"/>
    <meta name="twitter:creator" content="@carbontwelve"/>
    <meta name="twitter:title" content="{{ title or metadata.title }}"/>

    {% if ogtype === 'article' %}
        <meta name="twitter:label1" content="Words"/>
        <meta name="twitter:data1" content="{{ readingTime.words }}"/>

        <meta name="twitter:label2" content="Est. reading time"/>
        <meta name="twitter:data2" content="{{ readingTime.time }}"/>

        <meta name="article:published_time" content="{{ page.date.toISOString() }}"/>
{#        TODO: #}
{#        <meta name="article:modified_time" content=""/>#}
{#        <meta name="article:expiration_time" content=""/>#}

        {% if contentType %}
            <meta name="article:section" content="{{ contentType }}"/>
        {% endif %}

        {% for tag in tags %}
            <meta name="article:tag" content="{{ tag }}"/>
        {% endfor %}
    {% endif %}

    <!-- Favicon Meta -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#2b5797">
    <meta name="theme-color" content="#ffffff">

    <!-- Assets, 3rd party scripts, etc -->
    <link rel="preload" href="/fonts/iosevka-etoile-regular.subset.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="/fonts/iosevka-etoile-bold.subset.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="/fonts/iosevka-etoile-bolditalic.subset.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="/fonts/iosevka-etoile-italic.subset.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="stylesheet" href="/styles/main.css"/>
    <script data-goatcounter="https://photogabble.goatcounter.com/count" async src="https://gc.zgo.at/count.js"></script>
    <script>
      function toggleThemePicker() {
        const themePicker = document.querySelector('.theme-picker');
        if (themePicker.classList.contains('is-open')) {
          themePicker.classList.remove('is-open');
        } else {
          themePicker.classList.add('is-open');
        }
      }

      function setTheme(themeName) {
        localStorage.setItem('theme', themeName);
        document.documentElement.className = 'theme-' + themeName;

        let current = document.querySelector('.theme-picker li.current');
        if (!current) {
          return;
        }
        current
          .classList
          .remove('current');

        current = document.querySelector('.theme-picker li.' + 'theme-' + themeName);
        if (!current) {
          return;
        }
        current
          .classList
          .add('current');
      }

      // Set theme before page renders
      (function () {
        setTheme(localStorage.getItem('theme') || 'dark');
      })();

      // When document ready add event listeners
      document.addEventListener("DOMContentLoaded", function () {
        const selectTheme = (e) => {
          const btn = e.currentTarget;
          if (!btn.dataset.theme) {
            return;
          }
          setTheme(btn.dataset.theme);
        };

        Array.from(document.getElementsByClassName('theme-selector-btn')).forEach((el) => {
          console.log(el);
          el.addEventListener('click', selectTheme)
        });

        setTheme(localStorage.getItem('theme') || 'dark');
      });
    </script>
</head>
<body class="{% block body_class %}{% endblock %}">

<aside class="theme-picker">
    <h1>Theme Picker</h1>
    <ul>
        {%- for theme in themes -%}
            <li class="theme-{{ theme.id }} current">
                <button class="theme-selector-btn" data-theme="{{ theme.id }}">
                    <span>{{ theme.title }}</span>
                    <span class="swatches">
                        <span class="background"></span>
                        <span class="background-muted"></span>
                        <span class="foreground"></span>
                        <span class="foreground-muted"></span>
                        <span class="accent"></span>
                    </span>
                </button>
            </li>
        {% endfor %}
    </ul>
</aside>

<main>
    <header>
        {% block header %}
            {{ header | safe }}
        {% endblock %}

        <button class="btn" onclick="toggleThemePicker()">Theme Picker</button>
    </header>
    {% block content %}
        {{ content | safe }}
    {% endblock %}
</main>
<footer>
    <dl>
        <dt><a href="/" title="Back to home" class="no-underline">ðŸŒ±</a> Simon Dann</dt>
        <dd><a href="/projects" title="My Current and past projects">Projects</a></dd>
        <dd><a href="/writing" title="The Digital Garden Archive">Archive</a></dd>
        <dd><a href="/books" title="What I have been reading">Bookshelf</a></dd>
        <dd><a href="/uses" title="A somewhat complete list of tools, applications, hardware and services that I used on a day-to-day basis.">/uses</a></dd>
        <dd><a href="/now" title="A big picture glimpse into my what Iâ€™m focused on now">/now</a></dd>
    </dl>

    <dl>
        <dt>Writing</dt>
        <dd><a href="/blog/feed.xml" title="RSS Feed of all writing content">RSS</a></dd>
        <dd><a href="/stats/" title="Post stats">Stats</a></dd>
        <dd><a href="/essays/" title="Longform, invested ideas">Essays</a></dd>
        <dd><a href="/noteworthy" title="Short to medium length articles on things I find interesting">Noteworthy</a></dd>
        <dd><a href="/thoughts" title="Thoughts out loud, usually very short, very incomplete musings">Thoughts</a></dd>
        <dd><a href="/tutorials" title="Sharing the knowledge as best I can">Tutorials</a></dd>
    </dl>

    <dl>
        <dt>Community</dt>
        <dd><a href="https://webring.xxiivv.com/#random" target="_blank" title="XXIIVV webring">Webring</a></dd>
        <dd><a href="/links" title="Links to websites I have found interesting">Blogroll</a></dd>
    </dl>

    <p>
        &copy; {{ build.timestamp | dateToFormat('yyyy') }} Simon Dann. <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" title="Licensed CC BY-NC 4.0">CC BY-NC-SA 4.0</a> | <a href="https://github.com/photogabble/website">src</a> | <a href="/legal/privacy">cookies &amp; privacy</a>.<br/>
        <small>
            Any and all opinions listed here are my own and not representative of my employers; future, past and present.<br/> I may earn a portion of sales from
            products that are purchased through this site as part of Affiliate Partnerships with retailers.<br/>
            <small>Page built {% if metadata.commit.ref %} from <a href="{{ metadata.commit.url }}/commit/{{ metadata.commit.ref }}">{{ metadata.commit.ref | limit(7) }}</a> {% endif %} on {{ build.timestamp | dateToFormat('DDDD') }} at {{ build.timestamp | dateToFormat('TT') }} by <a href="https://www.netlify.com/">Netlify Elves</a>.</small>
        </small>
    </p>
</footer>
</body>
</html>
